(()=>{var We=Object.create;var Se=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var Je=Object.getOwnPropertyNames;var Ke=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var ze=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var qe=(r,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Je(e))!Ue.call(r,o)&&o!==n&&Se(r,o,{get:()=>e[o],enumerable:!(i=He(e,o))||i.enumerable});return r};var Ge=(r,e,n)=>(n=r!=null?We(Ke(r)):{},qe(e||!r||!r.__esModule?Se(n,"default",{value:r,enumerable:!0}):n,r));var Ie=ze((Q,Z)=>{(function(r,e){typeof Q=="object"&&typeof Z<"u"?Z.exports=e():typeof define=="function"&&define.amd?define(e):r.Mark=e()})(Q,function(){"use strict";var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},e=function(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")},n=function(){function h(u,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(u,a.key,a)}}return function(u,t,s){return t&&h(u.prototype,t),s&&h(u,s),u}}(),i=Object.assign||function(h){for(var u=1;u<arguments.length;u++){var t=arguments[u];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(h[s]=t[s])}return h},o=function(){function h(u){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;e(this,h),this.ctx=u,this.iframes=t,this.exclude=s,this.iframesTimeout=a}return n(h,[{key:"getContexts",value:function(){var t=void 0,s=[];return typeof this.ctx>"u"||!this.ctx?t=[]:NodeList.prototype.isPrototypeOf(this.ctx)?t=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?t=this.ctx:typeof this.ctx=="string"?t=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):t=[this.ctx],t.forEach(function(a){var l=s.filter(function(d){return d.contains(a)}).length>0;s.indexOf(a)===-1&&!l&&s.push(a)}),s}},{key:"getIframeContents",value:function(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},l=void 0;try{var d=t.contentWindow;if(l=d.document,!d||!l)throw new Error("iframe inaccessible")}catch{a()}l&&s(l)}},{key:"isIframeBlank",value:function(t){var s="about:blank",a=t.getAttribute("src").trim(),l=t.contentWindow.location.href;return l===s&&a!==s&&a}},{key:"observeIframeLoad",value:function(t,s,a){var l=this,d=!1,g=null,p=function m(){if(!d){d=!0,clearTimeout(g);try{l.isIframeBlank(t)||(t.removeEventListener("load",m),l.getIframeContents(t,s,a))}catch{a()}}};t.addEventListener("load",p),g=setTimeout(p,this.iframesTimeout)}},{key:"onIframeReady",value:function(t,s,a){try{t.contentWindow.document.readyState==="complete"?this.isIframeBlank(t)?this.observeIframeLoad(t,s,a):this.getIframeContents(t,s,a):this.observeIframeLoad(t,s,a)}catch{a()}}},{key:"waitForIframes",value:function(t,s){var a=this,l=0;this.forEachIframe(t,function(){return!0},function(d){l++,a.waitForIframes(d.querySelector("html"),function(){--l||s()})},function(d){d||s()})}},{key:"forEachIframe",value:function(t,s,a){var l=this,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},g=t.querySelectorAll("iframe"),p=g.length,m=0;g=Array.prototype.slice.call(g);var v=function(){--p<=0&&d(m)};p||v(),g.forEach(function(y){h.matches(y,l.exclude)?v():l.onIframeReady(y,function(A){s(y)&&(m++,a(A)),v()},v)})}},{key:"createIterator",value:function(t,s,a){return document.createNodeIterator(t,s,a,!1)}},{key:"createInstanceOnIframe",value:function(t){return new h(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(t,s,a){var l=t.compareDocumentPosition(a),d=Node.DOCUMENT_POSITION_PRECEDING;if(l&d)if(s!==null){var g=s.compareDocumentPosition(a),p=Node.DOCUMENT_POSITION_FOLLOWING;if(g&p)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(t){var s=t.previousNode(),a=void 0;return s===null?a=t.nextNode():a=t.nextNode()&&t.nextNode(),{prevNode:s,node:a}}},{key:"checkIframeFilter",value:function(t,s,a,l){var d=!1,g=!1;return l.forEach(function(p,m){p.val===a&&(d=m,g=p.handled)}),this.compareNodeIframe(t,s,a)?(d===!1&&!g?l.push({val:a,handled:!0}):d!==!1&&!g&&(l[d].handled=!0),!0):(d===!1&&l.push({val:a,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(t,s,a,l){var d=this;t.forEach(function(g){g.handled||d.getIframeContents(g.val,function(p){d.createInstanceOnIframe(p).forEachNode(s,a,l)})})}},{key:"iterateThroughNodes",value:function(t,s,a,l,d){for(var g=this,p=this.createIterator(s,t,l),m=[],v=[],y=void 0,A=void 0,x=function(){var w=g.getIteratorNode(p);return A=w.prevNode,y=w.node,y};x();)this.iframes&&this.forEachIframe(s,function(C){return g.checkIframeFilter(y,A,C,m)},function(C){g.createInstanceOnIframe(C).forEachNode(t,function(w){return v.push(w)},l)}),v.push(y);v.forEach(function(C){a(C)}),this.iframes&&this.handleOpenIframes(m,t,a,l),d()}},{key:"forEachNode",value:function(t,s,a){var l=this,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},g=this.getContexts(),p=g.length;p||d(),g.forEach(function(m){var v=function(){l.iterateThroughNodes(t,m,s,a,function(){--p<=0&&d()})};l.iframes?l.waitForIframes(m,v):v()})}}],[{key:"matches",value:function(t,s){var a=typeof s=="string"?[s]:s,l=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;if(l){var d=!1;return a.every(function(g){return l.call(t,g)?(d=!0,!1):!0}),d}else return!1}}]),h}(),c=function(){function h(u){e(this,h),this.ctx=u,this.ie=!1;var t=window.navigator.userAgent;(t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1)&&(this.ie=!0)}return n(h,[{key:"log",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",a=this.opt.log;this.opt.debug&&(typeof a>"u"?"undefined":r(a))==="object"&&typeof a[s]=="function"&&a[s]("mark.js: "+t)}},{key:"escapeStr",value:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(t){return this.opt.wildcards!=="disabled"&&(t=this.setupWildcardsRegExp(t)),t=this.escapeStr(t),Object.keys(this.opt.synonyms).length&&(t=this.createSynonymsRegExp(t)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),this.opt.diacritics&&(t=this.createDiacriticsRegExp(t)),t=this.createMergedBlanksRegExp(t),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.createJoinersRegExp(t)),this.opt.wildcards!=="disabled"&&(t=this.createWildcardsRegExp(t)),t=this.createAccuracyRegExp(t),t}},{key:"createSynonymsRegExp",value:function(t){var s=this.opt.synonyms,a=this.opt.caseSensitive?"":"i",l=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var d in s)if(s.hasOwnProperty(d)){var g=s[d],p=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(d):this.escapeStr(d),m=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(g):this.escapeStr(g);p!==""&&m!==""&&(t=t.replace(new RegExp("("+this.escapeStr(p)+"|"+this.escapeStr(m)+")","gm"+a),l+("("+this.processSynomyms(p)+"|")+(this.processSynomyms(m)+")")+l))}return t}},{key:"processSynomyms",value:function(t){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(t=this.setupIgnoreJoinersRegExp(t)),t}},{key:"setupWildcardsRegExp",value:function(t){return t=t.replace(/(?:\\)*\?/g,function(s){return s.charAt(0)==="\\"?"?":""}),t.replace(/(?:\\)*\*/g,function(s){return s.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(t){var s=this.opt.wildcards==="withSpaces";return t.replace(/\u0001/g,s?"[\\S\\s]?":"\\S?").replace(/\u0002/g,s?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(t){return t.replace(/[^(|)\\]/g,function(s,a,l){var d=l.charAt(a+1);return/[(|)\\]/.test(d)||d===""?s:s+"\0"})}},{key:"createJoinersRegExp",value:function(t){var s=[],a=this.opt.ignorePunctuation;return Array.isArray(a)&&a.length&&s.push(this.escapeStr(a.join(""))),this.opt.ignoreJoiners&&s.push("\\u00ad\\u200b\\u200c\\u200d"),s.length?t.split(/\u0000+/).join("["+s.join("")+"]*"):t}},{key:"createDiacriticsRegExp",value:function(t){var s=this.opt.caseSensitive?"":"i",a=this.opt.caseSensitive?["a\xE0\xE1\u1EA3\xE3\u1EA1\u0103\u1EB1\u1EAF\u1EB3\u1EB5\u1EB7\xE2\u1EA7\u1EA5\u1EA9\u1EAB\u1EAD\xE4\xE5\u0101\u0105","A\xC0\xC1\u1EA2\xC3\u1EA0\u0102\u1EB0\u1EAE\u1EB2\u1EB4\u1EB6\xC2\u1EA6\u1EA4\u1EA8\u1EAA\u1EAC\xC4\xC5\u0100\u0104","c\xE7\u0107\u010D","C\xC7\u0106\u010C","d\u0111\u010F","D\u0110\u010E","e\xE8\xE9\u1EBB\u1EBD\u1EB9\xEA\u1EC1\u1EBF\u1EC3\u1EC5\u1EC7\xEB\u011B\u0113\u0119","E\xC8\xC9\u1EBA\u1EBC\u1EB8\xCA\u1EC0\u1EBE\u1EC2\u1EC4\u1EC6\xCB\u011A\u0112\u0118","i\xEC\xED\u1EC9\u0129\u1ECB\xEE\xEF\u012B","I\xCC\xCD\u1EC8\u0128\u1ECA\xCE\xCF\u012A","l\u0142","L\u0141","n\xF1\u0148\u0144","N\xD1\u0147\u0143","o\xF2\xF3\u1ECF\xF5\u1ECD\xF4\u1ED3\u1ED1\u1ED5\u1ED7\u1ED9\u01A1\u1EDF\u1EE1\u1EDB\u1EDD\u1EE3\xF6\xF8\u014D","O\xD2\xD3\u1ECE\xD5\u1ECC\xD4\u1ED2\u1ED0\u1ED4\u1ED6\u1ED8\u01A0\u1EDE\u1EE0\u1EDA\u1EDC\u1EE2\xD6\xD8\u014C","r\u0159","R\u0158","s\u0161\u015B\u0219\u015F","S\u0160\u015A\u0218\u015E","t\u0165\u021B\u0163","T\u0164\u021A\u0162","u\xF9\xFA\u1EE7\u0169\u1EE5\u01B0\u1EEB\u1EE9\u1EED\u1EEF\u1EF1\xFB\xFC\u016F\u016B","U\xD9\xDA\u1EE6\u0168\u1EE4\u01AF\u1EEA\u1EE8\u1EEC\u1EEE\u1EF0\xDB\xDC\u016E\u016A","y\xFD\u1EF3\u1EF7\u1EF9\u1EF5\xFF","Y\xDD\u1EF2\u1EF6\u1EF8\u1EF4\u0178","z\u017E\u017C\u017A","Z\u017D\u017B\u0179"]:["a\xE0\xE1\u1EA3\xE3\u1EA1\u0103\u1EB1\u1EAF\u1EB3\u1EB5\u1EB7\xE2\u1EA7\u1EA5\u1EA9\u1EAB\u1EAD\xE4\xE5\u0101\u0105A\xC0\xC1\u1EA2\xC3\u1EA0\u0102\u1EB0\u1EAE\u1EB2\u1EB4\u1EB6\xC2\u1EA6\u1EA4\u1EA8\u1EAA\u1EAC\xC4\xC5\u0100\u0104","c\xE7\u0107\u010DC\xC7\u0106\u010C","d\u0111\u010FD\u0110\u010E","e\xE8\xE9\u1EBB\u1EBD\u1EB9\xEA\u1EC1\u1EBF\u1EC3\u1EC5\u1EC7\xEB\u011B\u0113\u0119E\xC8\xC9\u1EBA\u1EBC\u1EB8\xCA\u1EC0\u1EBE\u1EC2\u1EC4\u1EC6\xCB\u011A\u0112\u0118","i\xEC\xED\u1EC9\u0129\u1ECB\xEE\xEF\u012BI\xCC\xCD\u1EC8\u0128\u1ECA\xCE\xCF\u012A","l\u0142L\u0141","n\xF1\u0148\u0144N\xD1\u0147\u0143","o\xF2\xF3\u1ECF\xF5\u1ECD\xF4\u1ED3\u1ED1\u1ED5\u1ED7\u1ED9\u01A1\u1EDF\u1EE1\u1EDB\u1EDD\u1EE3\xF6\xF8\u014DO\xD2\xD3\u1ECE\xD5\u1ECC\xD4\u1ED2\u1ED0\u1ED4\u1ED6\u1ED8\u01A0\u1EDE\u1EE0\u1EDA\u1EDC\u1EE2\xD6\xD8\u014C","r\u0159R\u0158","s\u0161\u015B\u0219\u015FS\u0160\u015A\u0218\u015E","t\u0165\u021B\u0163T\u0164\u021A\u0162","u\xF9\xFA\u1EE7\u0169\u1EE5\u01B0\u1EEB\u1EE9\u1EED\u1EEF\u1EF1\xFB\xFC\u016F\u016BU\xD9\xDA\u1EE6\u0168\u1EE4\u01AF\u1EEA\u1EE8\u1EEC\u1EEE\u1EF0\xDB\xDC\u016E\u016A","y\xFD\u1EF3\u1EF7\u1EF9\u1EF5\xFFY\xDD\u1EF2\u1EF6\u1EF8\u1EF4\u0178","z\u017E\u017C\u017AZ\u017D\u017B\u0179"],l=[];return t.split("").forEach(function(d){a.every(function(g){if(g.indexOf(d)!==-1){if(l.indexOf(g)>-1)return!1;t=t.replace(new RegExp("["+g+"]","gm"+s),"["+g+"]"),l.push(g)}return!0})}),t}},{key:"createMergedBlanksRegExp",value:function(t){return t.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(t){var s=this,a="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\xA1\xBF",l=this.opt.accuracy,d=typeof l=="string"?l:l.value,g=typeof l=="string"?[]:l.limiters,p="";switch(g.forEach(function(m){p+="|"+s.escapeStr(m)}),d){case"partially":default:return"()("+t+")";case"complementary":return p="\\s"+(p||this.escapeStr(a)),"()([^"+p+"]*"+t+"[^"+p+"]*)";case"exactly":return"(^|\\s"+p+")("+t+")(?=$|\\s"+p+")"}}},{key:"getSeparatedKeywords",value:function(t){var s=this,a=[];return t.forEach(function(l){s.opt.separateWordSearch?l.split(" ").forEach(function(d){d.trim()&&a.indexOf(d)===-1&&a.push(d)}):l.trim()&&a.indexOf(l)===-1&&a.push(l)}),{keywords:a.sort(function(l,d){return d.length-l.length}),length:a.length}}},{key:"isNumeric",value:function(t){return Number(parseFloat(t))==t}},{key:"checkRanges",value:function(t){var s=this;if(!Array.isArray(t)||Object.prototype.toString.call(t[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(t),[];var a=[],l=0;return t.sort(function(d,g){return d.start-g.start}).forEach(function(d){var g=s.callNoMatchOnInvalidRanges(d,l),p=g.start,m=g.end,v=g.valid;v&&(d.start=p,d.length=m-p,a.push(d),l=m)}),a}},{key:"callNoMatchOnInvalidRanges",value:function(t,s){var a=void 0,l=void 0,d=!1;return t&&typeof t.start<"u"?(a=parseInt(t.start,10),l=a+parseInt(t.length,10),this.isNumeric(t.start)&&this.isNumeric(t.length)&&l-s>0&&l-a>0?d=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(t))),this.opt.noMatch(t))):(this.log("Ignoring invalid range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:a,end:l,valid:d}}},{key:"checkWhitespaceRanges",value:function(t,s,a){var l=void 0,d=!0,g=a.length,p=s-g,m=parseInt(t.start,10)-p;return m=m>g?g:m,l=m+parseInt(t.length,10),l>g&&(l=g,this.log("End range automatically set to the max value of "+g)),m<0||l-m<0||m>g||l>g?(d=!1,this.log("Invalid range: "+JSON.stringify(t)),this.opt.noMatch(t)):a.substring(m,l).replace(/\s+/g,"")===""&&(d=!1,this.log("Skipping whitespace only range: "+JSON.stringify(t)),this.opt.noMatch(t)),{start:m,end:l,valid:d}}},{key:"getTextNodes",value:function(t){var s=this,a="",l=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(d){l.push({start:a.length,end:(a+=d.textContent).length,node:d})},function(d){return s.matchesExclude(d.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){t({value:a,nodes:l})})}},{key:"matchesExclude",value:function(t){return o.matches(t,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(t,s,a){var l=this.opt.element?this.opt.element:"mark",d=t.splitText(s),g=d.splitText(a-s),p=document.createElement(l);return p.setAttribute("data-markjs","true"),this.opt.className&&p.setAttribute("class",this.opt.className),p.textContent=d.textContent,d.parentNode.replaceChild(p,d),g}},{key:"wrapRangeInMappedTextNode",value:function(t,s,a,l,d){var g=this;t.nodes.every(function(p,m){var v=t.nodes[m+1];if(typeof v>"u"||v.start>s){if(!l(p.node))return!1;var y=s-p.start,A=(a>p.end?p.end:a)-p.start,x=t.value.substr(0,p.start),C=t.value.substr(A+p.start);if(p.node=g.wrapRangeInTextNode(p.node,y,A),t.value=x+C,t.nodes.forEach(function(w,S){S>=m&&(t.nodes[S].start>0&&S!==m&&(t.nodes[S].start-=A),t.nodes[S].end-=A)}),a-=A,d(p.node.previousSibling,p.start),a>p.end)s=p.end;else return!1}return!0})}},{key:"wrapMatches",value:function(t,s,a,l,d){var g=this,p=s===0?0:s+1;this.getTextNodes(function(m){m.nodes.forEach(function(v){v=v.node;for(var y=void 0;(y=t.exec(v.textContent))!==null&&y[p]!=="";)if(a(y[p],v)){var A=y.index;if(p!==0)for(var x=1;x<p;x++)A+=y[x].length;v=g.wrapRangeInTextNode(v,A,A+y[p].length),l(v.previousSibling),t.lastIndex=0}}),d()})}},{key:"wrapMatchesAcrossElements",value:function(t,s,a,l,d){var g=this,p=s===0?0:s+1;this.getTextNodes(function(m){for(var v=void 0;(v=t.exec(m.value))!==null&&v[p]!=="";){var y=v.index;if(p!==0)for(var A=1;A<p;A++)y+=v[A].length;var x=y+v[p].length;g.wrapRangeInMappedTextNode(m,y,x,function(C){return a(v[p],C)},function(C,w){t.lastIndex=w,l(C)})}d()})}},{key:"wrapRangeFromIndex",value:function(t,s,a,l){var d=this;this.getTextNodes(function(g){var p=g.value.length;t.forEach(function(m,v){var y=d.checkWhitespaceRanges(m,p,g.value),A=y.start,x=y.end,C=y.valid;C&&d.wrapRangeInMappedTextNode(g,A,x,function(w){return s(w,m,g.value.substring(A,x),v)},function(w){a(w,m)})}),l()})}},{key:"unwrapMatches",value:function(t){for(var s=t.parentNode,a=document.createDocumentFragment();t.firstChild;)a.appendChild(t.removeChild(t.firstChild));s.replaceChild(a,t),this.ie?this.normalizeTextNode(s):s.normalize()}},{key:"normalizeTextNode",value:function(t){if(t){if(t.nodeType===3)for(;t.nextSibling&&t.nextSibling.nodeType===3;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else this.normalizeTextNode(t.firstChild);this.normalizeTextNode(t.nextSibling)}}},{key:"markRegExp",value:function(t,s){var a=this;this.opt=s,this.log('Searching with expression "'+t+'"');var l=0,d="wrapMatches",g=function(m){l++,a.opt.each(m)};this.opt.acrossElements&&(d="wrapMatchesAcrossElements"),this[d](t,this.opt.ignoreGroups,function(p,m){return a.opt.filter(m,p,l)},g,function(){l===0&&a.opt.noMatch(t),a.opt.done(l)})}},{key:"mark",value:function(t,s){var a=this;this.opt=s;var l=0,d="wrapMatches",g=this.getSeparatedKeywords(typeof t=="string"?[t]:t),p=g.keywords,m=g.length,v=this.opt.caseSensitive?"":"i",y=function A(x){var C=new RegExp(a.createRegExp(x),"gm"+v),w=0;a.log('Searching with expression "'+C+'"'),a[d](C,1,function(S,I){return a.opt.filter(I,x,l,w)},function(S){w++,l++,a.opt.each(S)},function(){w===0&&a.opt.noMatch(x),p[m-1]===x?a.opt.done(l):A(p[p.indexOf(x)+1])})};this.opt.acrossElements&&(d="wrapMatchesAcrossElements"),m===0?this.opt.done(l):y(p[0])}},{key:"markRanges",value:function(t,s){var a=this;this.opt=s;var l=0,d=this.checkRanges(t);d&&d.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(d)),this.wrapRangeFromIndex(d,function(g,p,m,v){return a.opt.filter(g,p,m,v)},function(g,p){l++,a.opt.each(g,p)},function(){a.opt.done(l)})):this.opt.done(l)}},{key:"unmark",value:function(t){var s=this;this.opt=t;var a=this.opt.element?this.opt.element:"*";a+="[data-markjs]",this.opt.className&&(a+="."+this.opt.className),this.log('Removal selector "'+a+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(l){s.unwrapMatches(l)},function(l){var d=o.matches(l,a),g=s.matchesExclude(l);return!d||g?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(t){this._opt=i({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},t)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),h}();function f(h){var u=this,t=new c(h);return this.mark=function(s,a){return t.mark(s,a),u},this.markRegExp=function(s,a){return t.markRegExp(s,a),u},this.markRanges=function(s,a){return t.markRanges(s,a),u},this.unmark=function(s){return t.unmark(s),u},this}return f})});var xe=Ge(Ie());var Ve=Object.prototype.toString,P=Array.isArray||function(e){return Ve.call(e)==="[object Array]"};function te(r){return typeof r=="function"}function Ye(r){return P(r)?"array":typeof r}function ee(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Me(r,e){return r!=null&&typeof r=="object"&&e in r}function Xe(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var Qe=RegExp.prototype.test;function Ze(r,e){return Qe.call(r,e)}var et=/\S/;function tt(r){return!Ze(et,r)}var nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function rt(r){return String(r).replace(/[&<>"'`=\/]/g,function(n){return nt[n]})}var st=/\s*/,it=/\s+/,ke=/\s*=/,at=/\s*\}/,ot=/#|\^|\/|>|\{|&|=|!/;function ut(r,e){if(!r)return[];var n=!1,i=[],o=[],c=[],f=!1,h=!1,u="",t=0;function s(){if(f&&!h)for(;c.length;)delete o[c.pop()];else c=[];f=!1,h=!1}var a,l,d;function g(I){if(typeof I=="string"&&(I=I.split(it,2)),!P(I)||I.length!==2)throw new Error("Invalid tags: "+I);a=new RegExp(ee(I[0])+"\\s*"),l=new RegExp("\\s*"+ee(I[1])),d=new RegExp("\\s*"+ee("}"+I[1]))}g(e||R.tags);for(var p=new W(r),m,v,y,A,x,C;!p.eos();){if(m=p.pos,y=p.scanUntil(a),y)for(var w=0,S=y.length;w<S;++w)A=y.charAt(w),tt(A)?(c.push(o.length),u+=A):(h=!0,n=!0,u+=" "),o.push(["text",A,m,m+1]),m+=1,A===`
`&&(s(),u="",t=0,n=!1);if(!p.scan(a))break;if(f=!0,v=p.scan(ot)||"name",p.scan(st),v==="="?(y=p.scanUntil(ke),p.scan(ke),p.scanUntil(l)):v==="{"?(y=p.scanUntil(d),p.scan(at),p.scanUntil(l),v="&"):y=p.scanUntil(l),!p.scan(l))throw new Error("Unclosed tag at "+p.pos);if(v==">"?x=[v,y,m,p.pos,u,t,n]:x=[v,y,m,p.pos],t++,o.push(x),v==="#"||v==="^")i.push(x);else if(v==="/"){if(C=i.pop(),!C)throw new Error('Unopened section "'+y+'" at '+m);if(C[1]!==y)throw new Error('Unclosed section "'+C[1]+'" at '+m)}else v==="name"||v==="{"||v==="&"?h=!0:v==="="&&g(y)}if(s(),C=i.pop(),C)throw new Error('Unclosed section "'+C[1]+'" at '+p.pos);return lt(ct(o))}function ct(r){for(var e=[],n,i,o=0,c=r.length;o<c;++o)n=r[o],n&&(n[0]==="text"&&i&&i[0]==="text"?(i[1]+=n[1],i[3]=n[3]):(e.push(n),i=n));return e}function lt(r){for(var e=[],n=e,i=[],o,c,f=0,h=r.length;f<h;++f)switch(o=r[f],o[0]){case"#":case"^":n.push(o),i.push(o),n=o[4]=[];break;case"/":c=i.pop(),c[5]=o[2],n=i.length>0?i[i.length-1][4]:e;break;default:n.push(o)}return e}function W(r){this.string=r,this.tail=r,this.pos=0}W.prototype.eos=function(){return this.tail===""};W.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var i=n[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i};W.prototype.scanUntil=function(e){var n=this.tail.search(e),i;switch(n){case-1:i=this.tail,this.tail="";break;case 0:i="";break;default:i=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=i.length,i};function $(r,e){this.view=r,this.cache={".":this.view},this.parent=e}$.prototype.push=function(e){return new $(e,this)};$.prototype.lookup=function(e){var n=this.cache,i;if(n.hasOwnProperty(e))i=n[e];else{for(var o=this,c,f,h,u=!1;o;){if(e.indexOf(".")>0)for(c=o.view,f=e.split("."),h=0;c!=null&&h<f.length;)h===f.length-1&&(u=Me(c,f[h])||Xe(c,f[h])),c=c[f[h++]];else c=o.view[e],u=Me(o.view,e);if(u){i=c;break}o=o.parent}n[e]=i}return te(i)&&(i=i.call(this.view)),i};function M(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}M.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};M.prototype.parse=function(e,n){var i=this.templateCache,o=e+":"+(n||R.tags).join(":"),c=typeof i<"u",f=c?i.get(o):void 0;return f==null&&(f=ut(e,n),c&&i.set(o,f)),f};M.prototype.render=function(e,n,i,o){var c=this.getConfigTags(o),f=this.parse(e,c),h=n instanceof $?n:new $(n,void 0);return this.renderTokens(f,h,i,e,o)};M.prototype.renderTokens=function(e,n,i,o,c){for(var f="",h,u,t,s=0,a=e.length;s<a;++s)t=void 0,h=e[s],u=h[0],u==="#"?t=this.renderSection(h,n,i,o,c):u==="^"?t=this.renderInverted(h,n,i,o,c):u===">"?t=this.renderPartial(h,n,i,c):u==="&"?t=this.unescapedValue(h,n):u==="name"?t=this.escapedValue(h,n,c):u==="text"&&(t=this.rawValue(h)),t!==void 0&&(f+=t);return f};M.prototype.renderSection=function(e,n,i,o,c){var f=this,h="",u=n.lookup(e[1]);function t(l){return f.render(l,n,i,c)}if(u){if(P(u))for(var s=0,a=u.length;s<a;++s)h+=this.renderTokens(e[4],n.push(u[s]),i,o,c);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")h+=this.renderTokens(e[4],n.push(u),i,o,c);else if(te(u)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,o.slice(e[3],e[5]),t),u!=null&&(h+=u)}else h+=this.renderTokens(e[4],n,i,o,c);return h}};M.prototype.renderInverted=function(e,n,i,o,c){var f=n.lookup(e[1]);if(!f||P(f)&&f.length===0)return this.renderTokens(e[4],n,i,o,c)};M.prototype.indentPartial=function(e,n,i){for(var o=n.replace(/[^ \t]/g,""),c=e.split(`
`),f=0;f<c.length;f++)c[f].length&&(f>0||!i)&&(c[f]=o+c[f]);return c.join(`
`)};M.prototype.renderPartial=function(e,n,i,o){if(i){var c=this.getConfigTags(o),f=te(i)?i(e[1]):i[e[1]];if(f!=null){var h=e[6],u=e[5],t=e[4],s=f;u==0&&t&&(s=this.indentPartial(f,t,h));var a=this.parse(s,c);return this.renderTokens(a,n,i,s,o)}}};M.prototype.unescapedValue=function(e,n){var i=n.lookup(e[1]);if(i!=null)return i};M.prototype.escapedValue=function(e,n,i){var o=this.getConfigEscape(i)||R.escape,c=n.lookup(e[1]);if(c!=null)return typeof c=="number"&&o===R.escape?String(c):o(c)};M.prototype.rawValue=function(e){return e[1]};M.prototype.getConfigTags=function(e){return P(e)?e:e&&typeof e=="object"?e.tags:void 0};M.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!P(e))return e.escape};var R={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){j.templateCache=r},get templateCache(){return j.templateCache}},j=new M;R.clearCache=function(){return j.clearCache()};R.parse=function(e,n){return j.parse(e,n)};R.render=function(e,n,i,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Ye(e)+'" was given as the first argument for mustache#render(template, view, partials)');return j.render(e,n,i,o)};R.escape=rt;R.Scanner=W;R.Context=$;R.Writer=M;var ne=R;function B(r){return Array.isArray?Array.isArray(r):Le(r)==="[object Array]"}var ht=1/0;function ft(r){if(typeof r=="string")return r;let e=r+"";return e=="0"&&1/r==-ht?"-0":e}function dt(r){return r==null?"":ft(r)}function F(r){return typeof r=="string"}function De(r){return typeof r=="number"}function pt(r){return r===!0||r===!1||gt(r)&&Le(r)=="[object Boolean]"}function _e(r){return typeof r=="object"}function gt(r){return _e(r)&&r!==null}function k(r){return r!=null}function re(r){return!r.trim().length}function Le(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var mt="Incorrect 'index' type",vt=r=>`Invalid value for key ${r}`,yt=r=>`Pattern length exceeds max of ${r}.`,Et=r=>`Missing ${r} property in key`,At=r=>`Property 'weight' in key '${r}' must be a positive integer`,Re=Object.prototype.hasOwnProperty,se=class{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(i=>{let o=Te(i);this._keys.push(o),this._keyMap[o.id]=o,n+=o.weight}),this._keys.forEach(i=>{i.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Te(r){let e=null,n=null,i=null,o=1,c=null;if(F(r)||B(r))i=r,e=be(r),n=ie(r);else{if(!Re.call(r,"name"))throw new Error(Et("name"));let f=r.name;if(i=f,Re.call(r,"weight")&&(o=r.weight,o<=0))throw new Error(At(f));e=be(f),n=ie(f),c=r.getFn}return{path:e,id:n,weight:o,src:i,getFn:c}}function be(r){return B(r)?r:r.split(".")}function ie(r){return B(r)?r.join("."):r}function xt(r,e){let n=[],i=!1,o=(c,f,h)=>{if(k(c))if(!f[h])n.push(c);else{let u=f[h],t=c[u];if(!k(t))return;if(h===f.length-1&&(F(t)||De(t)||pt(t)))n.push(dt(t));else if(B(t)){i=!0;for(let s=0,a=t.length;s<a;s+=1)o(t[s],f,h+1)}else f.length&&o(t,f,h+1)}};return o(r,F(e)?e.split("."):e,0),i?n:n[0]}var Ct={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},wt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,e)=>r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1},St={location:0,threshold:.6,distance:100},It={useExtendedSearch:!1,getFn:xt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},E={...wt,...Ct,...St,...It},Mt=/[^ ]+/g;function kt(r=1,e=3){let n=new Map,i=Math.pow(10,e);return{get(o){let c=o.match(Mt).length;if(n.has(c))return n.get(c);let f=1/Math.pow(c,.5*r),h=parseFloat(Math.round(f*i)/i);return n.set(c,h),h},clear(){n.clear()}}}var H=class{constructor({getFn:e=E.getFn,fieldNormWeight:n=E.fieldNormWeight}={}){this.norm=kt(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,i)=>{this._keysMap[n.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,F(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){let n=this.size();F(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,i=this.size();n<i;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!k(e)||re(e))return;let i={v:e,i:n,n:this.norm.get(e)};this.records.push(i)}_addObject(e,n){let i={i:n,$:{}};this.keys.forEach((o,c)=>{let f=o.getFn?o.getFn(e):this.getFn(e,o.path);if(k(f)){if(B(f)){let h=[],u=[{nestedArrIndex:-1,value:f}];for(;u.length;){let{nestedArrIndex:t,value:s}=u.pop();if(k(s))if(F(s)&&!re(s)){let a={v:s,i:t,n:this.norm.get(s)};h.push(a)}else B(s)&&s.forEach((a,l)=>{u.push({nestedArrIndex:l,value:a})})}i.$[c]=h}else if(F(f)&&!re(f)){let h={v:f,n:this.norm.get(f)};i.$[c]=h}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}};function Oe(r,e,{getFn:n=E.getFn,fieldNormWeight:i=E.fieldNormWeight}={}){let o=new H({getFn:n,fieldNormWeight:i});return o.setKeys(r.map(Te)),o.setSources(e),o.create(),o}function Rt(r,{getFn:e=E.getFn,fieldNormWeight:n=E.fieldNormWeight}={}){let{keys:i,records:o}=r,c=new H({getFn:e,fieldNormWeight:n});return c.setKeys(i),c.setIndexRecords(o),c}function K(r,{errors:e=0,currentLocation:n=0,expectedLocation:i=0,distance:o=E.distance,ignoreLocation:c=E.ignoreLocation}={}){let f=e/r.length;if(c)return f;let h=Math.abs(i-n);return o?f+h/o:h?1:f}function bt(r=[],e=E.minMatchCharLength){let n=[],i=-1,o=-1,c=0;for(let f=r.length;c<f;c+=1){let h=r[c];h&&i===-1?i=c:!h&&i!==-1&&(o=c-1,o-i+1>=e&&n.push([i,o]),i=-1)}return r[c-1]&&c-i>=e&&n.push([i,c-1]),n}var T=32;function Ft(r,e,n,{location:i=E.location,distance:o=E.distance,threshold:c=E.threshold,findAllMatches:f=E.findAllMatches,minMatchCharLength:h=E.minMatchCharLength,includeMatches:u=E.includeMatches,ignoreLocation:t=E.ignoreLocation}={}){if(e.length>T)throw new Error(yt(T));let s=e.length,a=r.length,l=Math.max(0,Math.min(i,a)),d=c,g=l,p=h>1||u,m=p?Array(a):[],v;for(;(v=r.indexOf(e,g))>-1;){let S=K(e,{currentLocation:v,expectedLocation:l,distance:o,ignoreLocation:t});if(d=Math.min(S,d),g=v+s,p){let I=0;for(;I<s;)m[v+I]=1,I+=1}}g=-1;let y=[],A=1,x=s+a,C=1<<s-1;for(let S=0;S<s;S+=1){let I=0,L=x;for(;I<L;)K(e,{errors:S,currentLocation:l+L,expectedLocation:l,distance:o,ignoreLocation:t})<=d?I=L:x=L,L=Math.floor((x-I)/2+I);x=L;let Ce=Math.max(1,l-L+1),X=f?a:Math.min(l+L,a)+s,O=Array(X+2);O[X+1]=(1<<S)-1;for(let b=X;b>=Ce;b-=1){let J=b-1,we=n[r.charAt(J)];if(p&&(m[J]=+!!we),O[b]=(O[b+1]<<1|1)&we,S&&(O[b]|=(y[b+1]|y[b])<<1|1|y[b+1]),O[b]&C&&(A=K(e,{errors:S,currentLocation:J,expectedLocation:l,distance:o,ignoreLocation:t}),A<=d)){if(d=A,g=J,g<=l)break;Ce=Math.max(1,2*l-g)}}if(K(e,{errors:S+1,currentLocation:l,expectedLocation:l,distance:o,ignoreLocation:t})>d)break;y=O}let w={isMatch:g>=0,score:Math.max(.001,A)};if(p){let S=bt(m,h);S.length?u&&(w.indices=S):w.isMatch=!1}return w}function Nt(r){let e={};for(let n=0,i=r.length;n<i;n+=1){let o=r.charAt(n);e[o]=(e[o]||0)|1<<i-n-1}return e}var U=String.prototype.normalize?r=>r.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):r=>r,z=class{constructor(e,{location:n=E.location,threshold:i=E.threshold,distance:o=E.distance,includeMatches:c=E.includeMatches,findAllMatches:f=E.findAllMatches,minMatchCharLength:h=E.minMatchCharLength,isCaseSensitive:u=E.isCaseSensitive,ignoreDiacritics:t=E.ignoreDiacritics,ignoreLocation:s=E.ignoreLocation}={}){if(this.options={location:n,threshold:i,distance:o,includeMatches:c,findAllMatches:f,minMatchCharLength:h,isCaseSensitive:u,ignoreDiacritics:t,ignoreLocation:s},e=u?e:e.toLowerCase(),e=t?U(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;let a=(d,g)=>{this.chunks.push({pattern:d,alphabet:Nt(d),startIndex:g})},l=this.pattern.length;if(l>T){let d=0,g=l%T,p=l-g;for(;d<p;)a(this.pattern.substr(d,T),d),d+=T;if(g){let m=l-T;a(this.pattern.substr(m),m)}}else a(this.pattern,0)}searchIn(e){let{isCaseSensitive:n,ignoreDiacritics:i,includeMatches:o}=this.options;if(e=n?e:e.toLowerCase(),e=i?U(e):e,this.pattern===e){let p={isMatch:!0,score:0};return o&&(p.indices=[[0,e.length-1]]),p}let{location:c,distance:f,threshold:h,findAllMatches:u,minMatchCharLength:t,ignoreLocation:s}=this.options,a=[],l=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:m,startIndex:v})=>{let{isMatch:y,score:A,indices:x}=Ft(e,p,m,{location:c+v,distance:f,threshold:h,findAllMatches:u,minMatchCharLength:t,includeMatches:o,ignoreLocation:s});y&&(d=!0),l+=A,y&&x&&(a=[...a,...x])});let g={isMatch:d,score:d?l/this.chunks.length:1};return d&&o&&(g.indices=a),g}},N=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Fe(e,this.multiRegex)}static isSingleMatch(e){return Fe(e,this.singleRegex)}search(){}};function Fe(r,e){let n=r.match(e);return n?n[1]:null}var ae=class extends N{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},oe=class extends N{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}},ue=class extends N{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}},ce=class extends N{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},le=class extends N{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},he=class extends N{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},q=class extends N{constructor(e,{location:n=E.location,threshold:i=E.threshold,distance:o=E.distance,includeMatches:c=E.includeMatches,findAllMatches:f=E.findAllMatches,minMatchCharLength:h=E.minMatchCharLength,isCaseSensitive:u=E.isCaseSensitive,ignoreDiacritics:t=E.ignoreDiacritics,ignoreLocation:s=E.ignoreLocation}={}){super(e),this._bitapSearch=new z(e,{location:n,threshold:i,distance:o,includeMatches:c,findAllMatches:f,minMatchCharLength:h,isCaseSensitive:u,ignoreDiacritics:t,ignoreLocation:s})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},G=class extends N{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,i,o=[],c=this.pattern.length;for(;(i=e.indexOf(this.pattern,n))>-1;)n=i+c,o.push([i,n-1]);let f=!!o.length;return{isMatch:f,score:f?0:1,indices:o}}},fe=[ae,G,ue,ce,he,le,oe,q],Ne=fe.length,Bt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Dt="|";function _t(r,e={}){return r.split(Dt).map(n=>{let i=n.trim().split(Bt).filter(c=>c&&!!c.trim()),o=[];for(let c=0,f=i.length;c<f;c+=1){let h=i[c],u=!1,t=-1;for(;!u&&++t<Ne;){let s=fe[t],a=s.isMultiMatch(h);a&&(o.push(new s(a,e)),u=!0)}if(!u)for(t=-1;++t<Ne;){let s=fe[t],a=s.isSingleMatch(h);if(a){o.push(new s(a,e));break}}}return o})}var Lt=new Set([q.type,G.type]),de=class{constructor(e,{isCaseSensitive:n=E.isCaseSensitive,ignoreDiacritics:i=E.ignoreDiacritics,includeMatches:o=E.includeMatches,minMatchCharLength:c=E.minMatchCharLength,ignoreLocation:f=E.ignoreLocation,findAllMatches:h=E.findAllMatches,location:u=E.location,threshold:t=E.threshold,distance:s=E.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:i,includeMatches:o,minMatchCharLength:c,findAllMatches:h,ignoreLocation:f,location:u,threshold:t,distance:s},e=n?e:e.toLowerCase(),e=i?U(e):e,this.pattern=e,this.query=_t(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){let n=this.query;if(!n)return{isMatch:!1,score:1};let{includeMatches:i,isCaseSensitive:o,ignoreDiacritics:c}=this.options;e=o?e:e.toLowerCase(),e=c?U(e):e;let f=0,h=[],u=0;for(let t=0,s=n.length;t<s;t+=1){let a=n[t];h.length=0,f=0;for(let l=0,d=a.length;l<d;l+=1){let g=a[l],{isMatch:p,indices:m,score:v}=g.search(e);if(p){if(f+=1,u+=v,i){let y=g.constructor.type;Lt.has(y)?h=[...h,...m]:h.push(m)}}else{u=0,f=0,h.length=0;break}}if(f){let l={isMatch:!0,score:u/f};return i&&(l.indices=h),l}}return{isMatch:!1,score:1}}},pe=[];function Tt(...r){pe.push(...r)}function ge(r,e){for(let n=0,i=pe.length;n<i;n+=1){let o=pe[n];if(o.condition(r,e))return new o(r,e)}return new z(r,e)}var V={AND:"$and",OR:"$or"},me={PATH:"$path",PATTERN:"$val"},ve=r=>!!(r[V.AND]||r[V.OR]),Ot=r=>!!r[me.PATH],$t=r=>!B(r)&&_e(r)&&!ve(r),Be=r=>({[V.AND]:Object.keys(r).map(e=>({[e]:r[e]}))});function $e(r,e,{auto:n=!0}={}){let i=o=>{let c=Object.keys(o),f=Ot(o);if(!f&&c.length>1&&!ve(o))return i(Be(o));if($t(o)){let u=f?o[me.PATH]:c[0],t=f?o[me.PATTERN]:o[u];if(!F(t))throw new Error(vt(u));let s={keyId:ie(u),pattern:t};return n&&(s.searcher=ge(t,e)),s}let h={children:[],operator:c[0]};return c.forEach(u=>{let t=o[u];B(t)&&t.forEach(s=>{h.children.push(i(s))})}),h};return ve(r)||(r=Be(r)),i(r)}function Pt(r,{ignoreFieldNorm:e=E.ignoreFieldNorm}){r.forEach(n=>{let i=1;n.matches.forEach(({key:o,norm:c,score:f})=>{let h=o?o.weight:null;i*=Math.pow(f===0&&h?Number.EPSILON:f,(h||1)*(e?1:c))}),n.score=i})}function jt(r,e){let n=r.matches;e.matches=[],k(n)&&n.forEach(i=>{if(!k(i.indices)||!i.indices.length)return;let{indices:o,value:c}=i,f={indices:o,value:c};i.key&&(f.key=i.key.src),i.idx>-1&&(f.refIndex=i.idx),e.matches.push(f)})}function Wt(r,e){e.score=r.score}function Ht(r,e,{includeMatches:n=E.includeMatches,includeScore:i=E.includeScore}={}){let o=[];return n&&o.push(jt),i&&o.push(Wt),r.map(c=>{let{idx:f}=c,h={item:e[f],refIndex:f};return o.length&&o.forEach(u=>{u(c,h)}),h})}var D=class{constructor(e,n={},i){this.options={...E,...n},this.options.useExtendedSearch,this._keyStore=new se(this.options.keys),this.setCollection(e,i)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof H))throw new Error(mt);this._myIndex=n||Oe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){k(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let n=[];for(let i=0,o=this._docs.length;i<o;i+=1){let c=this._docs[i];e(c,i)&&(this.removeAt(i),i-=1,o-=1,n.push(c))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){let{includeMatches:i,includeScore:o,shouldSort:c,sortFn:f,ignoreFieldNorm:h}=this.options,u=F(e)?F(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Pt(u,{ignoreFieldNorm:h}),c&&u.sort(f),De(n)&&n>-1&&(u=u.slice(0,n)),Ht(u,this._docs,{includeMatches:i,includeScore:o})}_searchStringList(e){let n=ge(e,this.options),{records:i}=this._myIndex,o=[];return i.forEach(({v:c,i:f,n:h})=>{if(!k(c))return;let{isMatch:u,score:t,indices:s}=n.searchIn(c);u&&o.push({item:c,idx:f,matches:[{score:t,value:c,norm:h,indices:s}]})}),o}_searchLogical(e){let n=$e(e,this.options),i=(h,u,t)=>{if(!h.children){let{keyId:a,searcher:l}=h,d=this._findMatches({key:this._keyStore.get(a),value:this._myIndex.getValueForItemAtKeyId(u,a),searcher:l});return d&&d.length?[{idx:t,item:u,matches:d}]:[]}let s=[];for(let a=0,l=h.children.length;a<l;a+=1){let d=h.children[a],g=i(d,u,t);if(g.length)s.push(...g);else if(h.operator===V.AND)return[]}return s},o=this._myIndex.records,c={},f=[];return o.forEach(({$:h,i:u})=>{if(k(h)){let t=i(n,h,u);t.length&&(c[u]||(c[u]={idx:u,item:h,matches:[]},f.push(c[u])),t.forEach(({matches:s})=>{c[u].matches.push(...s)}))}}),f}_searchObjectList(e){let n=ge(e,this.options),{keys:i,records:o}=this._myIndex,c=[];return o.forEach(({$:f,i:h})=>{if(!k(f))return;let u=[];i.forEach((t,s)=>{u.push(...this._findMatches({key:t,value:f[s],searcher:n}))}),u.length&&c.push({idx:h,item:f,matches:u})}),c}_findMatches({key:e,value:n,searcher:i}){if(!k(n))return[];let o=[];if(B(n))n.forEach(({v:c,i:f,n:h})=>{if(!k(c))return;let{isMatch:u,score:t,indices:s}=i.searchIn(c);u&&o.push({score:t,key:e,value:c,idx:f,norm:h,indices:s})});else{let{v:c,n:f}=n,{isMatch:h,score:u,indices:t}=i.searchIn(c);h&&o.push({score:u,key:e,value:c,norm:f,indices:t})}return o}};D.version="7.1.0";D.createIndex=Oe;D.parseIndex=Rt;D.config=E;D.parseQuery=$e;Tt(de);var ye={fuse:{ignoreLocation:!0,minMatchCharLength:3},maxResults:100,paginate:10,resultContentWordCount:240};var Ee=class{fuse;pages=[];indices=[];constructor(e,n){document.querySelectorAll('meta[name="search-index"]').forEach(c=>{this.indices.push(c.getAttribute("content"))});let i=Object.assign(ye.fuse,{useExtendedSearch:!0,includeMatches:!0,includeScore:!0,keys:["title","content","lang","authors_titles","categories_titles","series_titles","tags_titles"]});console.debug("fuse.js options",i);let o=[];for(let c in this.indices)o.push(fetch(this.indices[c],{method:"GET"}).then(f=>f.json()));Promise.all(o).then(c=>{this.fuse=new D([],i);let f=["authors","categories","series","tags"];for(let h in c)for(let u in c[h]){let t=c[h][u];for(let s in f){let a=f[s];a in t?t[a+"_titles"]=t[a].map(l=>l.title).join(" "):t[a+"_titles"]=""}this.fuse.add(t),this.pages.push({timestamp:t.timestamp})}n(e.data())}).catch(c=>{console.error("unable to load search index",c)})}sortByDate(e,n,i=!0){return e.idx in this.pages?n.idx in this.pages?this.pages[e.idx].timestamp<this.pages[n.idx].timestamp?i?-1:1:i?1:-1:-1:1}sortByScore(e,n){return e.score===n.score?e.idx<n.idx?-1:1:e.score<n.score?-1:1}search(e){switch(e.get("sort")){case"date asc":this.fuse.options.sortFn=(n,i)=>this.sortByDate(n,i);break;case"date desc":this.fuse.options.sortFn=(n,i)=>this.sortByDate(n,i,!1);break;default:this.fuse.options.sortFn=this.sortByScore;break}return new Promise(n=>{setTimeout(()=>{let i={$and:[{$or:[{title:e.get("q")},{content:e.get("q")}]}]},o=e.get("author");o&&i.$and.push({authors_titles:o});let c=e.get("category");c&&i.$and.push({categories_titles:c});let f=e.get("series");f&&i.$and.push({series_titles:f});let h=e.get("tag");h&&i.$and.push({tags_titles:h});let u=e.get("lang");u&&i.$and.push({lang:"="+u}),n(this.fuse.search(i,{limit:parseInt(ye.maxResults)}))},1)})}},Pe=Ee;var Ae=class{constructor(e,n){this.form=e;this.callback=n,this.form.addEventListener("submit",i=>{i.preventDefault(),this.submit()}),this.input=e.querySelector('input[name="q"]'),this.input.value===""&&(this.input.value=new URLSearchParams(window.location.search).get("q")),this.lang=e.querySelector('select[name="lang"]'),this.lang.addEventListener("change",()=>{this.submit()}),e.querySelector("#sorting-select").addEventListener("change",()=>{this.submit()})}callback;input;lang;submit(){this.callback(this.data())}data(){return new FormData(this.form)}},je=Ae;var _={fuse:{ignoreLocation:!0,minMatchCharLength:3},maxResults:100,paginate:10,resultContentWordCount:240};var Y=class r{resultsElement;stat;highlightOptions={element:"span",className:"text-primary"};tmplMissingKeywords;tmplNoResults;tmplStat;tmplResult;page=1;results;loading=!1;loadingSpinner;loadMore;title="";form;engine;meta="";constructor(e){this.meta=document.querySelector('meta[name="search-meta"]').getAttribute("content"),this.form=new je(e,n=>{this.search(n)}),this.engine=new Pe(this.form,n=>{this.search(n)}),this.title=document.title}run(){this.resultsElement=document.getElementById("searchResults"),this.stat=document.getElementById("searchStat"),this.loadingSpinner=document.getElementById("loadingSpinner"),this.tmplMissingKeywords=document.getElementById("templateMissingKeywords").innerHTML,this.tmplNoResults=document.getElementById("templateNoResults").innerHTML,this.tmplStat=document.getElementById("templateStat").innerHTML,this.tmplResult=document.getElementById("templateResult").innerHTML,this.loadMore=document.getElementById("btnLoadMore"),this.loadMore.addEventListener("click",()=>{this.showLoadingSpinner(),this.poplateResults().finally(()=>{this.hideLoadingSpinner()})}),fetch(this.meta).then(e=>e.json()).then(e=>{for(let n in e){let i=document.querySelector(`#${n}-list`),o=e[n];for(let c in o){let f=document.createElement("option");f.value=o[c],i.appendChild(f)}}}).catch(e=>{console.error("unable to load search meta index",e)})}hideLoadMoreBtn(){this.loadMore.classList.add("d-none")}showLoadMoreBtn(){this.loadMore.classList.remove("d-none")}hideLoadingSpinner(){this.loadingSpinner.classList.contains("d-none")||this.loadingSpinner.classList.add("d-none")}showLoadingSpinner(){this.loadingSpinner.classList.remove("d-none")}search(e){if(this.resultsElement.innerHTML="",this.showLoadingSpinner(),!e.has("q")){this.stat.innerHTML=this.tmplMissingKeywords,this.hideLoadMoreBtn(),this.hideLoadingSpinner();return}this.setPage(e.get("q")),this.engine.search(e).then(n=>{this.page=1,this.results=n,this.results.length>_.paginate?this.showLoadMoreBtn():this.hideLoadMoreBtn()}).then(()=>{this.results.length>0?this.poplateResultsInternal():this.stat.innerHTML=this.tmplNoResults}).catch(n=>{console.error(n)}).finally(()=>{this.hideLoadingSpinner()})}setPage(e){let n=(e?`${e} - `:"")+this.title,i=`${window.location.pathname}?q=${encodeURIComponent(e)}`;window.history.pushState(null,n,i),document.title=n}static normalizeTaxonomy(e,n){return n(e).toLowerCase().replaceAll(" ","-")}poplateResults(){return new Promise(e=>{setTimeout(()=>{e(this.poplateResultsInternal())},1)})}poplateResultsInternal(){if(!this.results||this.loading)return;this.loading=!0,this.loadMore.setAttribute("disabled",""),this.stat.innerHTML=ne.render(this.tmplStat,{total:this.results.length});let e=(this.page-1)*_.paginate,n=0;for(;e<this.results.length&&n<_.paginate;e+=1,n+=1){let o=this.results[e],c=(this.page-1)*_.paginate+e,f=[],h=[];o.matches.forEach(s=>{s.indices.forEach(a=>{let l=s.value.substring(a[0],a[1]+1);switch(s.key){case"title":f.push(l);break;case"content":h.push(l);break;default:}})});let{content:u}=o.item;if(u.length>_.resultContentWordCount){let s=0;if(h.length>0){let a=u.indexOf(h[0]);a+h[0].length>_.resultContentWordCount-1&&(s=a)}u=`${(s===0?"":"...")+u.substring(s,s+_.resultContentWordCount)}...`}let t=`searchResult${c}`;this.resultsElement.insertAdjacentHTML("beforeend",ne.render(this.tmplResult,{title:o.item.title,content:u,id:t,img:o.item.img,smallImg:o.item.smallImg,largeImg:o.item.largeImg,permalink:o.item.permalink,categories:o.item.categories,authors:o.item.authors,tags:o.item.tags,series:o.item.series,score:r.formatScore(o.score),date:o.item.date,langName:o.item.langName,url(){return r.normalizeTaxonomy}})),this.highlight(t,f,h)}this.loading=!1,this.loadMore.removeAttribute("disabled"),this.results.length<=_.paginate*this.page?this.hideLoadMoreBtn():this.showLoadMoreBtn(),this.page+=1;let i=document.createEvent("HTMLEvents");i.initEvent("hbs:viewer:update"),document.dispatchEvent(i)}static formatScore(e){return((1-e)*5).toFixed(1)}highlight(e,n,i){new xe.default(document.querySelectorAll(`#${e} .search-result-title`)).mark(n,this.highlightOptions),new xe.default(document.querySelectorAll(`#${e} .search-result-content`)).mark(i,this.highlightOptions)}};document.addEventListener("DOMContentLoaded",()=>{new Y(document.querySelector("#searchForm")).run()});})();
/*! Bundled license information:

mark.js/dist/mark.js:
  (*!***************************************************
  * mark.js v8.11.1
  * https://markjs.io/
  * Copyright (c) 2014–2018, Julian Kühnel
  * Released under the MIT license https://git.io/vwTVl
  *****************************************************)

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)
*/
